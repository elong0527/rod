# Study XYZ123 - Analysis Plan
# This file contains only the plan specifications using condensed keyword approach

study:
  name: "XYZ123"
  title: "Phase III Study of Drug X vs Placebo"
  template:
    - organization.yaml

# Analysis Plans - Using metalite-style condensed format
plans:
  # Demographics - Single combination
  - analysis: "demographics"
    population: "itt"
    group: "trt01a"

  # AE Summary tables
  - analysis: "ae_summary"
    population: "apat"
    observation: ["week12", "week24"]
    group: "trt01a"
    parameter: "any;rel;ser"  # Semicolon-separated for single combination

  # AE Specific analysis - Multiple parameters as list
  - analysis: "ae_specific"
    population: "apat"
    observation: ["week12", "week24"]
    group: "trt01a"
    parameter: ["any", "rel", "ser"]  # List for multiple combinations

  # AE Listings
  - analysis: "ae_listing"
    population: "apat"
    observation: "week12"
    group: "trt01a"
    parameter: ["any", "rel", "ser"]  


population:
  - name: apat
    filter: "adsl:saffl == 'Y'"
  - name: itt
    filter: "adsl:ittfl == 'Y'"

observation:
  - name: week12
    label: "Week 12"
    description: "12-week post-baseline assessment"
    filter: "adae:avisit == 'Week 12'"
  - name: week24
    label: "Week 24"
    description: "24-week post-baseline assessment"
    filter: "adae:avisit == 'Week 24'"

group:
  - name: trt01a
    variable: "adsl:trt01a"

population:
  - name: apat
    label: "All Participants as Treated"
    filter: "adsl:saffl == 'Y'"
  - name: itt
    label: "Intention-to-Treat"
    filter: "adsl:ittfl == 'Y'"

parameter:
  - name: any
    label: "Any One or More Adverse Events" # test override label.
    filter: "adae:trtemfl == 'Y'"
  - name: rel
    filter: "adae:trtemfl == 'Y' and adae:aerel in ['RELATED', 'PROBABLY RELATED', 'POSSIBLY RELATED']"
  - name: ser
    filter: "adae:trtemfl == 'Y' and adae:aeser == 'Y'"

data:
  - name: adsl 
    path: ../../data/adsl.parquet
  - name: adae
    path: ../../data/adae.parquet